# Quote Service

Веб-приложение на Django, которое отображает случайные цитаты из фильмов и книг.

**Ссылка на развернутое приложение:** [http://JKL2.pythonanywhere.com](http://JKL2.pythonanywhere.com)

## Основные возможности

*   **Взвешенная случайная выдача:** Главная страница показывает случайную цитату с учетом ее "веса". Реализовано с оптимальным использованием памяти через `values_list`.
*   **Интерактивная статистика:** Для каждой цитаты ведется подсчет просмотров, лайков и дизлайков. Голосование реализовано асинхронно (AJAX/Fetch API) без перезагрузки страницы.
*   **Топ-10 цитат:** Отдельная страница `/top/` отображает 10 самых популярных цитат, отсортированных по количеству лайков.
*   **Продуманная админ-панель:** Удобное управление цитатами и источниками с реализацией всей бизнес-логики на уровне моделей:
    *   **Валидация:** Нельзя добавить более 3 цитат на один источник. Диапазон "веса" ограничен для удобства пользователя.
    *   **Информативность:** В админ-панели отображается количество цитат у каждого источника.
*   **Готовая база данных:** Приложение поставляется с начальным набором цитат, которые автоматически загружаются при первой миграции для удобства проверки.
*   **Высокое качество кода:** Проект имеет 100% тестовое покрытие, что гарантирует надежность реализованной логики.

## Стек технологий

*   **Backend:** Python 3, Django
*   **Frontend:** HTML5, CSS3 (Flexbox), JavaScript (Fetch API)
*   **База данных:** SQLite (для простоты развертывания)
*   **Тестирование:** `unittest`, `coverage`
*   **Развертывание:** PythonAnywhere

## Локальный запуск

#### 1. Подготовка окружения
Клонируйте репозиторий и перейдите в его директорию:
```
git clone https://github.com/JKL2theBest/quote-service-django
cd quote-service-django
```
Создайте и активируйте виртуальное окружение:
```
python -m venv venv
# Для Linux/macOS
source venv/bin/activate
# Для Windows
# venv\Scripts\activate
```
Установите зависимости:
```
pip install -r requirements.txt
```

#### 2. Конфигурация
Создайте файл `.env` в корневой директории проекта. Этот файл используется для хранения секретных настроек и не отслеживается Git.
```
# .env
SECRET_KEY='your-very-secret-django-key-here'
DEBUG=True
ALLOWED_HOSTS=127.0.0.1,localhost
```

#### 3. Запуск приложения
Примените миграции. На этом шаге база данных будет создана и автоматически наполнена начальным набором цитат.
```
python manage.py migrate
```
Создайте суперпользователя для доступа к административной панели:
```
python manage.py createsuperuser
```
Запустите сервер для разработки (по умолчанию на порту 8080):
```
python manage.py runserver
```
Приложение будет доступно по адресу `http://127.0.0.1:8080/`.  
Административная панель: `http://127.0.0.1:8080/admin/`.

## Тестирование

Проект имеет 100% покрытие кода тестами. Для запуска всех тестов выполните команду:
```
python manage.py test quotes
```
Для генерации отчета о покрытии (требуется `coverage`):
```
coverage run manage.py test quotes
coverage report
```
Для просмотра детального HTML-отчета:
```
coverage html
```
После этого откройте файл `htmlcov/index.html` в вашем браузере.
